import{c as Nt}from"./chunk-MWVM4TYO-bKUcYSnf.js";import{r as a,cB as Ft,cC as ce,aD as Pt,j as u,C as fe,b as ne,W as ke,G as X,aH as Be,Z as Rt,aP as nt,cD as K,aU as ie,cE as Gt,B as ae,cF as Tt,cG as Vt,cH as Wt,cI as $t,cJ as Ht,cK as Kt,H as Bt,cL as Lt,bb as Le,cM as Ut,z as Yt,X as Zt,I as Qt,T as Xt}from"./index-DX2a82HP.js";import{f as Jt,C as qt}from"./index.esm-crGpFqYO.js";import{c as es,u as ts,b as ss,f as rt}from"./index-BUcLkKzP.js";import{C as ns}from"./checkbox-BO157Suw.js";var rs=Object.defineProperty,ue=Object.getOwnPropertySymbols,lt=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable,Ue=(e,s,t)=>s in e?rs(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,ls=(e,s)=>{for(var t in s||(s={}))lt.call(s,t)&&Ue(e,t,s[t]);if(ue)for(var t of ue(s))ot.call(s,t)&&Ue(e,t,s[t]);return e},os=(e,s)=>{var t={};for(var n in e)lt.call(e,n)&&s.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&ue)for(var n of ue(e))s.indexOf(n)<0&&ot.call(e,n)&&(t[n]=e[n]);return t};const it=a.forwardRef((e,s)=>{var t=e,{color:n="currentColor"}=t,r=os(t,["color"]);return a.createElement("svg",ls({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:s},r),a.createElement("g",{stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,clipPath:"url(#a)"},a.createElement("path",{d:"M12.611 7.5h.889M1.5 7.5h8.444M7.722 3.278H13.5M1.5 3.278h3.556M7.722 11.722H13.5M1.5 11.722h3.556M9.944 5.722v3.556M5.056 1.5v3.556M5.056 9.944V13.5"})),a.createElement("defs",null,a.createElement("clipPath",{id:"a"},a.createElement("path",{fill:"#fff",d:"M0 0h15v15H0z"}))))});it.displayName="Adjustments";var is=Object.defineProperty,de=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable,Ye=(e,s,t)=>s in e?is(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,as=(e,s)=>{for(var t in s||(s={}))at.call(s,t)&&Ye(e,t,s[t]);if(de)for(var t of de(s))ct.call(s,t)&&Ye(e,t,s[t]);return e},cs=(e,s)=>{var t={};for(var n in e)at.call(e,n)&&s.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&de)for(var n of de(e))s.indexOf(n)<0&&ct.call(e,n)&&(t[n]=e[n]);return t};const ut=a.forwardRef((e,s)=>{var t=e,{color:n="currentColor"}=t,r=cs(t,["color"]);return a.createElement("svg",as({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:s},r),a.createElement("g",{clipPath:"url(#a)"},a.createElement("path",{fill:n,d:"M8.5 2.528h-.778a.75.75 0 1 0 0 1.5h1.08a4 4 0 0 1-.302-1.5M10.695 6.07a4 4 0 0 1-1.21-.94.75.75 0 0 0-.29.592V6.75H1.5a.75.75 0 0 0 0 1.5h7.694v1.028a.75.75 0 0 0 1.5 0zM5.806 1.5a.75.75 0 1 0-1.5 0v1.028H1.5a.75.75 0 0 0 0 1.5h2.806v1.028a.75.75 0 0 0 1.5 0V1.5M12.611 6.75a.75.75 0 0 0 0 1.5h.889a.75.75 0 0 0 0-1.5zM6.972 11.722a.75.75 0 0 1 .75-.75H13.5a.75.75 0 1 1 0 1.5H7.722a.75.75 0 0 1-.75-.75M1.5 10.972a.75.75 0 0 0 0 1.5h2.806V13.5a.75.75 0 0 0 1.5 0V9.944a.75.75 0 1 0-1.5 0v1.028z"}),a.createElement("circle",{cx:12.5,cy:2.5,r:2.5,fill:"#60A5FA"}),a.createElement("circle",{cx:12.5,cy:2.5,r:2,stroke:n,strokeOpacity:.12})),a.createElement("defs",null,a.createElement("clipPath",{id:"a"},a.createElement("path",{fill:"#fff",d:"M0 0h15v15H0z"}))))});ut.displayName="AdjustmentsDone";var us=Object.defineProperty,he=Object.getOwnPropertySymbols,dt=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable,Ze=(e,s,t)=>s in e?us(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,ds=(e,s)=>{for(var t in s||(s={}))dt.call(s,t)&&Ze(e,t,s[t]);if(he)for(var t of he(s))ht.call(s,t)&&Ze(e,t,s[t]);return e},hs=(e,s)=>{var t={};for(var n in e)dt.call(e,n)&&s.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&he)for(var n of he(e))s.indexOf(n)<0&&ht.call(e,n)&&(t[n]=e[n]);return t};const ft=a.forwardRef((e,s)=>{var t=e,{color:n="currentColor"}=t,r=hs(t,["color"]);return a.createElement("svg",ds({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none",ref:s},r),a.createElement("g",{clipPath:"url(#a)"},a.createElement("path",{fill:n,d:"M1 5.694H.25c0 .415.336.75.75.75zm13 0v.75a.75.75 0 0 0 .75-.75zm0-1.444h.75a.75.75 0 0 0-.445-.685zM7.5 1.361l.305-.685a.75.75 0 0 0-.61 0zM1 4.25l-.305-.685a.75.75 0 0 0-.445.685zm5.056 10.139a.75.75 0 0 0 0-1.5zM1 13.639l-.72-.21a.75.75 0 0 0 .72.96zm.632-2.167v-.75a.75.75 0 0 0-.72.54zm4.424.75a.75.75 0 0 0 0-1.5zm8.158-2.792a.75.75 0 1 0-1.06-1.061zM8.73 12.793a.75.75 0 1 0 1.06 1.06zM1 6.444h13v-1.5H1zm13.75-.75V4.25h-1.5v1.444zm-.445-2.13L7.805.677l-.61 1.37 6.5 2.89zM7.195.677l-6.5 2.889.61 1.37 6.5-2.889zM.25 4.25v1.444h1.5V4.25zm5.806 8.639H1v1.5h5.056zm-4.336.96.632-2.167-1.44-.42L.28 13.43zm-.088-1.627h4.424v-1.5H1.632zm.062-6.528v5.778h1.5V5.694zm4.39 5.778V5.694h-1.5v5.778zm7.07-3.103L8.73 12.793l1.06 1.06 4.424-4.423zm-3.876.756c0-.115.093-.208.208-.208v1.5c.713 0 1.292-.579 1.292-1.292zm.208-.208c.115 0 .208.093.208.208h-1.5c0 .713.579 1.292 1.292 1.292zm.208.208a.21.21 0 0 1-.208.208v-1.5c-.713 0-1.292.579-1.292 1.292zm-.208.208a.21.21 0 0 1-.208-.208h1.5c0-.713-.578-1.292-1.292-1.292zm3.764 3.764c0-.115.093-.208.208-.208v1.5c.714 0 1.292-.578 1.292-1.292zm.208-.208c.115 0 .209.093.209.208h-1.5c0 .714.578 1.292 1.291 1.292zm.209.208a.21.21 0 0 1-.209.209v-1.5c-.713 0-1.291.578-1.291 1.291zm-.209.209a.21.21 0 0 1-.208-.209h1.5c0-.713-.578-1.291-1.292-1.291z"})),a.createElement("defs",null,a.createElement("clipPath",{id:"a"},a.createElement("path",{fill:"#fff",d:"M0 0h15v15H0z"}))))});ft.displayName="BuildingTax";var fs=function(e){var s=e.as,t=e.errors,n=e.name,r=e.message,l=e.render,i=function(g,w){if(g==null)return{};var v,p,f={},j=Object.keys(g);for(p=0;p<j.length;p++)w.indexOf(v=j[p])>=0||(f[v]=g[v]);return f}(e,["as","errors","name","message","render"]),o=Ft(),c=ce(t||o.formState.errors,n);if(!c)return null;var d=c.message,h=c.types,b=Object.assign({},i,{children:d||r});return a.isValidElement(s)?a.cloneElement(s,b):l?l({message:d||r,messages:h}):a.createElement(s||a.Fragment,b)};function te(e,s,t){let n=t.initialDeps??[],r;function l(){var i,o,c,d;let h;t.key&&((i=t.debug)!=null&&i.call(t))&&(h=Date.now());const b=e();if(!(b.length!==n.length||b.some((v,p)=>n[p]!==v)))return r;n=b;let w;if(t.key&&((o=t.debug)!=null&&o.call(t))&&(w=Date.now()),r=s(...b),t.key&&((c=t.debug)!=null&&c.call(t))){const v=Math.round((Date.now()-h)*100)/100,p=Math.round((Date.now()-w)*100)/100,f=p/16,j=(x,E)=>{for(x=String(x);x.length<E;)x=" "+x;return x};console.info(`%c⏱ ${j(p,5)} /${j(v,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*f,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(d=t==null?void 0:t.onChange)==null||d.call(t,r),r}return l.updateDeps=i=>{n=i},l}function Qe(e,s){if(e===void 0)throw new Error("Unexpected undefined");return e}const ms=(e,s)=>Math.abs(e-s)<1.01,ps=(e,s,t)=>{let n;return function(...r){e.clearTimeout(n),n=e.setTimeout(()=>s.apply(this,r),t)}},Xe=e=>{const{offsetWidth:s,offsetHeight:t}=e;return{width:s,height:t}},gs=e=>e,vs=e=>{const s=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),n=[];for(let r=s;r<=t;r++)n.push(r);return n},bs=(e,s)=>{const t=e.scrollElement;if(!t)return;const n=e.targetWindow;if(!n)return;const r=i=>{const{width:o,height:c}=i;s({width:Math.round(o),height:Math.round(c)})};if(r(Xe(t)),!n.ResizeObserver)return()=>{};const l=new n.ResizeObserver(i=>{const o=()=>{const c=i[0];if(c!=null&&c.borderBoxSize){const d=c.borderBoxSize[0];if(d){r({width:d.inlineSize,height:d.blockSize});return}}r(Xe(t))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return l.observe(t,{box:"border-box"}),()=>{l.unobserve(t)}},Je={passive:!0},qe=typeof window>"u"?!0:"onscrollend"in window,ws=(e,s)=>{const t=e.scrollElement;if(!t)return;const n=e.targetWindow;if(!n)return;let r=0;const l=e.options.useScrollendEvent&&qe?()=>{}:ps(n,()=>{s(r,!1)},e.options.isScrollingResetDelay),i=h=>()=>{const{horizontal:b,isRtl:g}=e.options;r=b?t.scrollLeft*(g&&-1||1):t.scrollTop,l(),s(r,h)},o=i(!0),c=i(!1);c(),t.addEventListener("scroll",o,Je);const d=e.options.useScrollendEvent&&qe;return d&&t.addEventListener("scrollend",c,Je),()=>{t.removeEventListener("scroll",o),d&&t.removeEventListener("scrollend",c)}},xs=(e,s,t)=>{if(s!=null&&s.borderBoxSize){const n=s.borderBoxSize[0];if(n)return Math.round(n[t.options.horizontal?"inlineSize":"blockSize"])}return e[t.options.horizontal?"offsetWidth":"offsetHeight"]},Cs=(e,{adjustments:s=0,behavior:t},n)=>{var r,l;const i=e+s;(l=(r=n.scrollElement)==null?void 0:r.scrollTo)==null||l.call(r,{[n.options.horizontal?"left":"top"]:i,behavior:t})};class ys{constructor(s){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const n=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(r=>{r.forEach(l=>{const i=()=>{this._measureElement(l.target,l)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(i):i()})}));return{disconnect:()=>{var r;(r=n())==null||r.disconnect(),t=null},observe:r=>{var l;return(l=n())==null?void 0:l.observe(r,{box:"border-box"})},unobserve:r=>{var l;return(l=n())==null?void 0:l.unobserve(r)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([n,r])=>{typeof r>"u"&&delete t[n]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:gs,rangeExtractor:vs,onChange:()=>{},measureElement:xs,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var n,r;(r=(n=this.options).onChange)==null||r.call(n,this,t)},this.maybeNotify=te(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:"maybeNotify",debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const n=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==n){if(this.cleanup(),!n){this.maybeNotify();return}this.scrollElement=n,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(r=>{this.observer.observe(r)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,r=>{this.scrollRect=r,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(r,l)=>{this.scrollAdjustments=0,this.scrollDirection=l?this.getScrollOffset()<r?"forward":"backward":null,this.scrollOffset=r,this.isScrolling=l,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,n)=>{const r=new Map,l=new Map;for(let i=n-1;i>=0;i--){const o=t[i];if(r.has(o.lane))continue;const c=l.get(o.lane);if(c==null||o.end>c.end?l.set(o.lane,o):o.end<c.end&&r.set(o.lane,!0),r.size===this.options.lanes)break}return l.size===this.options.lanes?Array.from(l.values()).sort((i,o)=>i.end===o.end?i.index-o.index:i.end-o.end)[0]:void 0},this.getMeasurementOptions=te(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,n,r,l,i)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:n,scrollMargin:r,getItemKey:l,enabled:i}),{key:!1}),this.getMeasurements=te(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:n,scrollMargin:r,getItemKey:l,enabled:i},o)=>{if(!i)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(h=>{this.itemSizeCache.set(h.key,h.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const d=this.measurementsCache.slice(0,c);for(let h=c;h<t;h++){const b=l(h),g=this.options.lanes===1?d[h-1]:this.getFurthestMeasurement(d,h),w=g?g.end+this.options.gap:n+r,v=o.get(b),p=typeof v=="number"?v:this.options.estimateSize(h),f=w+p,j=g?g.lane:h%this.options.lanes;d[h]={index:h,start:w,size:p,end:f,key:b,lane:j}}return this.measurementsCache=d,d},{key:"getMeasurements",debug:()=>this.options.debug}),this.calculateRange=te(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,n,r,l)=>this.range=t.length>0&&n>0?js({measurements:t,outerSize:n,scrollOffset:r,lanes:l}):null,{key:"calculateRange",debug:()=>this.options.debug}),this.getVirtualIndexes=te(()=>{let t=null,n=null;const r=this.calculateRange();return r&&(t=r.startIndex,n=r.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,n]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,n]},(t,n,r,l,i)=>l===null||i===null?[]:t({startIndex:l,endIndex:i,overscan:n,count:r}),{key:"getVirtualIndexes",debug:()=>this.options.debug}),this.indexFromElement=t=>{const n=this.options.indexAttribute,r=t.getAttribute(n);return r?parseInt(r,10):(console.warn(`Missing attribute name '${n}={index}' on measured element.`),-1)},this._measureElement=(t,n)=>{const r=this.indexFromElement(t),l=this.measurementsCache[r];if(!l)return;const i=l.key,o=this.elementsCache.get(i);o!==t&&(o&&this.observer.unobserve(o),this.observer.observe(t),this.elementsCache.set(i,t)),t.isConnected&&this.resizeItem(r,this.options.measureElement(t,n,this))},this.resizeItem=(t,n)=>{const r=this.measurementsCache[t];if(!r)return;const l=this.itemSizeCache.get(r.key)??r.size,i=n-l;i!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(r,i,this):r.start<this.getScrollOffset()+this.scrollAdjustments)&&(this.options.debug&&console.info("correction",i),this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=i,behavior:void 0})),this.pendingMeasuredCacheIndexes.push(r.index),this.itemSizeCache=new Map(this.itemSizeCache.set(r.key,n)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((n,r)=>{n.isConnected||(this.observer.unobserve(n),this.elementsCache.delete(r))});return}this._measureElement(t,void 0)},this.getVirtualItems=te(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,n)=>{const r=[];for(let l=0,i=t.length;l<i;l++){const o=t[l],c=n[o];r.push(c)}return r},{key:"getVirtualItems",debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const n=this.getMeasurements();if(n.length!==0)return Qe(n[mt(0,n.length-1,r=>Qe(n[r]).start,t)])},this.getOffsetForAlignment=(t,n,r=0)=>{const l=this.getSize(),i=this.getScrollOffset();n==="auto"&&(n=t>=i+l?"end":"start"),n==="center"?t+=(r-l)/2:n==="end"&&(t-=l);const o=this.getTotalSize()+this.options.scrollMargin-l;return Math.max(Math.min(o,t),0)},this.getOffsetForIndex=(t,n="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const r=this.measurementsCache[t];if(!r)return;const l=this.getSize(),i=this.getScrollOffset();if(n==="auto")if(r.end>=i+l-this.options.scrollPaddingEnd)n="end";else if(r.start<=i+this.options.scrollPaddingStart)n="start";else return[i,n];const o=n==="end"?r.end+this.options.scrollPaddingEnd:r.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,n,r.size),n]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(t,{align:n="start",behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,n),{adjustments:void 0,behavior:r})},this.scrollToIndex=(t,{align:n="auto",behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t=Math.max(0,Math.min(t,this.options.count-1));let l=0;const i=10,o=d=>{if(!this.targetWindow)return;const h=this.getOffsetForIndex(t,d);if(!h){console.warn("Failed to get offset for index:",t);return}const[b,g]=h;this._scrollToOffset(b,{adjustments:void 0,behavior:r}),this.targetWindow.requestAnimationFrame(()=>{const w=this.getScrollOffset(),v=this.getOffsetForIndex(t,g);if(!v){console.warn("Failed to get offset for index:",t);return}ms(v[0],w)||c(g)})},c=d=>{this.targetWindow&&(l++,l<i?(this.options.debug&&console.info("Schedule retry",l,i),this.targetWindow.requestAnimationFrame(()=>o(d))):console.warn(`Failed to scroll to index ${t} after ${i} attempts.`))};o(n)},this.scrollBy=(t,{behavior:n}={})=>{n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:n})},this.getTotalSize=()=>{var t;const n=this.getMeasurements();let r;if(n.length===0)r=this.options.paddingStart;else if(this.options.lanes===1)r=((t=n[n.length-1])==null?void 0:t.end)??0;else{const l=Array(this.options.lanes).fill(null);let i=n.length-1;for(;i>=0&&l.some(o=>o===null);){const o=n[i];l[o.lane]===null&&(l[o.lane]=o.end),i--}r=Math.max(...l.filter(o=>o!==null))}return Math.max(r-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:n,behavior:r})=>{this.options.scrollToFn(t,{behavior:r,adjustments:n},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(s)}}const mt=(e,s,t,n)=>{for(;e<=s;){const r=(e+s)/2|0,l=t(r);if(l<n)e=r+1;else if(l>n)s=r-1;else return r}return e>0?e-1:0};function js({measurements:e,outerSize:s,scrollOffset:t,lanes:n}){const r=e.length-1,l=c=>e[c].start;if(e.length<=n)return{startIndex:0,endIndex:r};let i=mt(0,r,l,t),o=i;if(n===1)for(;o<r&&e[o].end<t+s;)o++;else if(n>1){const c=Array(n).fill(0);for(;o<r&&c.some(h=>h<t+s);){const h=e[o];c[h.lane]=h.end,o++}const d=Array(n).fill(t+s);for(;i>=0&&d.some(h=>h>=t);){const h=e[i];d[h.lane]=h.start,i--}i=Math.max(0,i-i%n),o=Math.min(r,o+(n-1-o%n))}return{startIndex:i,endIndex:o}}const et=typeof document<"u"?a.useLayoutEffect:a.useEffect;function Es(e){const s=a.useReducer(()=>({}),{})[1],t={...e,onChange:(r,l)=>{var i;l?Pt.flushSync(s):s(),(i=e.onChange)==null||i.call(e,r,l)}},[n]=a.useState(()=>new ys(t));return n.setOptions(t),et(()=>n._didMount(),[]),et(()=>n._willUpdate()),n}function tt(e){return Es({observeElementRect:bs,observeElementOffset:ws,scrollToFn:Cs,...e})}function Ms(e,s){typeof e=="function"?e(s):e&&"current"in e&&(e.current=s)}var me=(...e)=>s=>{e.forEach(t=>Ms(t,s))},pt=a.createContext(null),gt=()=>{const e=a.useContext(pt);if(!e)throw new Error("useDataGridContext must be used within a DataGridContextProvider");return e};function vt(e){return`${e.row}:${e.col}`}function bt(e,s){return s?e.row===s.row&&e.col===s.col:!1}var _s=[".",","];function wt(e){return _s.includes(e.key)&&e.ctrlKey&&e.altKey}var ks=/^.$/u,Ss=/^[0-9]$/u,pe=({context:e})=>{const{register:s,control:t,anchor:n,setIsEditing:r,setSingleRange:l,setIsSelecting:i,setRangeEnd:o,getWrapperFocusHandler:c,getWrapperMouseOverHandler:d,getInputChangeHandler:h,getIsCellSelected:b,getIsCellDragSelected:g,getCellMetadata:w}=gt(),{rowIndex:v,columnIndex:p}=e,f=a.useMemo(()=>({row:v,col:p}),[v,p]),{id:j,field:x,type:E,innerAttributes:y,inputAttributes:S}=a.useMemo(()=>w(f),[f,w]),[F,R]=a.useState(!0),P=a.useRef(null),A=a.useRef(null),Q=a.useCallback(M=>{if(M.preventDefault(),M.stopPropagation(),M.detail===2&&A.current){R(!1),A.current.focus();return}if(M.shiftKey&&f.col===(n==null?void 0:n.col)){o(f);return}P.current&&(l(f),i(!0),P.current.focus())},[f,n,o,l,i]),J=a.useCallback(M=>{var m;if(M.preventDefault(),M.stopPropagation(),M.detail===2){(m=A.current)==null||m.focus();return}if(M.shiftKey){o(f);return}P.current&&(l(f),i(!0),P.current.focus())},[i,l,o,f]),U=a.useCallback(()=>{R(!0),r(!1)},[r]),Y=a.useCallback(()=>{R(!1),r(!0)},[r]),T=a.useCallback(M=>E==="number"?Ss.test(M):E==="text"?ks.test(M):!1,[E]),q=a.useCallback(M=>{var m;if(!(!A.current||!T(M.key)||!F)&&!(M.key.toLowerCase()==="z"&&(M.ctrlKey||M.metaKey))&&!(M.key.toLowerCase()==="c"&&(M.ctrlKey||M.metaKey))&&!(M.key.toLowerCase()==="v"&&(M.ctrlKey||M.metaKey))&&M.key!=="Enter"&&!wt(M.nativeEvent)){if(A.current.focus(),R(!1),A.current instanceof HTMLInputElement){A.current.value="";const C=(m=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value"))==null?void 0:m.set;C==null||C.call(A.current,M.key);const z=new Event("input",{bubbles:!0});A.current.dispatchEvent(z)}M.stopPropagation(),M.preventDefault()}},[F,T]),G=a.useMemo(()=>n?bt(f,n):!1,[n,f]),B=a.useMemo(()=>E==="boolean",[E]);a.useEffect(()=>{var M,m;G&&!((M=P.current)!=null&&M.contains(document.activeElement))&&((m=P.current)==null||m.focus())},[G]);const ee={container:{field:x,isAnchor:G,isSelected:b(f),isDragSelected:g(f),showOverlay:B?!1:F,innerProps:{ref:P,onMouseOver:d(f),onMouseDown:E==="boolean"?J:void 0,onKeyDown:q,onFocus:c(f),...y},overlayProps:{onMouseDown:Q}},input:{ref:A,onBlur:U,onFocus:Y,onChange:h(x),...S}};return{id:j,field:x,register:s,control:t,renderProps:ee}},re=({context:e})=>{const{errors:s,getCellErrorMetadata:t,navigateToField:n}=gt(),{rowIndex:r,columnIndex:l}=e,{accessor:i,field:o}=a.useMemo(()=>t({row:r,col:l}),[r,l,t]),c=i&&l===0?ce(s,i):void 0,d=[];function h(g,w){if(g)if(zs(g)){const v=g.message,p=()=>n(w);v&&d.push({message:v,to:p})}else Object.keys(g).forEach(v=>{const p=g[v],f=`${w}.${v}`;p&&typeof p=="object"&&h(p,f)})}c&&i&&h(c,i);const b=o?ce(s,o):void 0;return{errors:s,rowErrors:d,cellError:b}};function zs(e){return typeof e=="object"&&"message"in e&&"type"in e}var se=class{constructor({fields:e,prev:s,next:t,setter:n}){K(this,"_fields"),K(this,"_prev"),K(this,"_next"),K(this,"_setter"),this._fields=e,this._prev=s,this._next=t,this._setter=n}execute(){this._setter(this._fields,this._next)}undo(){this._setter(this._fields,this._prev)}redo(){this.execute()}},Ds=class{constructor(e,s){K(this,"cells"),K(this,"rowAccessors",[]),K(this,"columnAccessors",[]),this.cells=this._populateCells(e,s),this.rowAccessors=this._computeRowAccessors(),this.columnAccessors=this._computeColumnAccessors()}_computeRowAccessors(){return this.cells.map((e,s)=>this.getRowAccessor(s))}_computeColumnAccessors(){return this.cells.length===0?[]:this.cells[0].map((e,s)=>this.getColumnAccessor(s))}getFirstNavigableCell(){for(let e=0;e<this.cells.length;e++)for(let s=0;s<this.cells[0].length;s++)if(this.cells[e][s]!==null)return{row:e,col:s};return null}getFieldsInRow(e){const s=[];return e<0||e>=this.cells.length||this.cells[e].forEach(t=>{t!==null&&s.push(t.field)}),s}getFieldsInSelection(e,s){var i;const t=[];if(!e||!s)return t;if(e.col!==s.col)throw new Error("Selection must be in the same column");const n=Math.min(e.row,s.row),r=Math.max(e.row,s.row),l=e.col;for(let o=n;o<=r;o++)this._isValidPosition(o,l)&&this.cells[o][l]!==null&&t.push((i=this.cells[o][l])==null?void 0:i.field);return t}getCellField(e){var s;return this._isValidPosition(e.row,e.col)&&((s=this.cells[e.row][e.col])==null?void 0:s.field)||null}getCellType(e){var s;return this._isValidPosition(e.row,e.col)&&((s=this.cells[e.row][e.col])==null?void 0:s.type)||null}getIsCellSelected(e,s,t){if(!e||!s||!t)return!1;if(s.col!==t.col)throw new Error("Selection must be in the same column");const n=Math.min(s.row,t.row),r=Math.max(s.row,t.row),l=s.col;return e.col===l&&e.row>=n&&e.row<=r}toggleColumn(e,s){e<0||e>=this.cells[0].length||this.cells.forEach((t,n)=>{const r=t[e];r&&(this.cells[n][e]={...r,enabled:s})})}toggleRow(e,s){e<0||e>=this.cells.length||this.cells[e].forEach((t,n)=>{t&&(this.cells[e][n]={...t,enabled:s})})}getCoordinatesByField(e){if(this.rowAccessors.length===1){const s=this.columnAccessors.indexOf(e);return s===-1?null:{row:0,col:s}}for(let s=0;s<this.rowAccessors.length;s++){const t=this.rowAccessors[s];if(t!==null&&e.startsWith(t))for(let n=0;n<this.columnAccessors.length;n++){const r=this.columnAccessors[n];if(r===null)continue;if(`${t}.${r}`===e)return{row:s,col:n}}}return null}getRowAccessor(e){if(e<0||e>=this.cells.length)return null;const t=this.cells[e].filter(l=>l!==null).map(l=>l.field.split("."));if(t.length===0)return null;let n=t[0];for(const l of t)if(n=n.filter((i,o)=>l[o]===i),n.length===0)break;const r=n.join(".");return r||null}getColumnAccessor(e){if(e<0||e>=this.cells[0].length)return null;const s=this.cells.map((r,l)=>{const i=r[e];if(!i)return null;const o=this.getRowAccessor(l);return o&&i.field.startsWith(o+".")?i.field.slice(o.length+1):null}).filter(r=>r!==null);if(s.length===0)return null;const t=s[0];return s.every(r=>r===t)?t:null}getValidMovement(e,s,t,n=!1){var i;const[r,l]=this._getDirectionDeltas(t);if(n)return this._getLastValidCellInDirection(e,s,r,l);{let o=e+r,c=s+l;for(;this._isValidPosition(o,c);){if(this.cells[o][c]!==null&&((i=this.cells[o][c])==null?void 0:i.enabled)!==!1)return{row:o,col:c};o+=r,c+=l}return{row:e,col:s}}}_isValidPosition(e,s,t){return t||(t=this.cells),e>=0&&e<t.length&&s>=0&&s<t[0].length}_getDirectionDeltas(e){switch(e){case"ArrowUp":return[-1,0];case"ArrowDown":return[1,0];case"ArrowLeft":return[0,-1];case"ArrowRight":return[0,1];default:return[0,0]}}_getLastValidCellInDirection(e,s,t,n){let r=e,l=s,i=e,o=s;for(;this._isValidPosition(r+t,l+n);)r+=t,l+=n,this.cells[r][l]!==null&&(i=r,o=l);return{row:i,col:o}}_populateCells(e,s){const t=Array.from({length:e.length},()=>Array(s.length).fill(null));return e.forEach((n,r)=>{s.forEach((l,i)=>{if(!this._isValidPosition(r,i,t))return;const{name:o,field:c,type:d,...h}=l.meta,b={row:n,column:{...l,meta:h}},g=c?c(b):null;!g||!d||(t[r][i]={field:g,type:d,enabled:!0})})}),t}},Is=class{constructor(e){K(this,"container"),this.container=e}getInput(e){var n;const s=this._getCellId(e),t=(n=this.container)==null?void 0:n.querySelector(`[data-cell-id="${s}"]`);return t||null}getInputByField(e){var t;const s=(t=this.container)==null?void 0:t.querySelector(`[data-field="${e}"]`);return s||null}getCoordinatesByField(e){var l;const s=(l=this.container)==null?void 0:l.querySelector(`[data-field="${e}"][data-cell-id]`);if(!s)return null;const t=s.getAttribute("data-cell-id");if(!t)return null;const[n,r]=t.split(":").map(i=>parseInt(i,10));return isNaN(n)||isNaN(r)?null:{row:n,col:r}}getContainer(e){var n;const s=this._getCellId(e),t=(n=this.container)==null?void 0:n.querySelector(`[data-container-id="${s}"]`);return t||null}_getCellId(e){return vt(e)}},Ee=class{constructor({prev:e,next:s,setter:t}){K(this,"_prev"),K(this,"_next"),K(this,"_setter"),this._prev=e,this._next=s,this._setter=t}execute(){this._setter(this._next)}undo(){this._setter(this._prev)}redo(){this.execute()}},Os=({matrix:e,anchor:s,rangeEnd:t,setRangeEnd:n,isDragging:r,setIsDragging:l,isSelecting:i,setIsSelecting:o,setSingleRange:c,dragEnd:d,setDragEnd:h,setValue:b,execute:g})=>{const w=a.useCallback(y=>S=>{c(y)},[c]),v=a.useCallback(y=>S=>{if(S.stopPropagation(),S.preventDefault(),S.shiftKey){n(y);return}o(!0),c(y)},[o,n,c]),p=a.useCallback(y=>{if(!(!r&&!i))return S=>{(s==null?void 0:s.col)===y.col&&(i?n(y):h(y))}},[s==null?void 0:s.col,r,i,h,n]),f=a.useCallback(y=>(S,F)=>{const R=new Ee({next:S,prev:F,setter:P=>{b(y,P,{shouldDirty:!0,shouldTouch:!0})}});g(R)},[b,g]),j=a.useCallback(y=>{l(!0)},[l]),x=a.useCallback(y=>!y||!s||!t?!1:e.getIsCellSelected(y,s,t),[s,t,e]),E=a.useCallback(y=>!y||!s||!d?!1:e.getIsCellSelected(y,s,d),[s,d,e]);return{getWrapperFocusHandler:w,getOverlayMouseDownHandler:v,getWrapperMouseOverHandler:p,getInputChangeHandler:f,getIsCellSelected:x,getIsCellDragSelected:E,onDragToFillStart:j}},As=({matrix:e})=>{const s=a.useCallback(n=>{const{row:r,col:l}=n,i=vt(n),o=e.getCellField(n),c=e.getCellType(n);if(!o||!c)throw new Error(`'field' or 'type' is null for cell ${i}`);return{id:i,field:o,type:c,inputAttributes:{"data-row":r,"data-col":l,"data-cell-id":i,"data-field":o},innerAttributes:{"data-container-id":i}}},[e]),t=a.useCallback(n=>{const r=e.getRowAccessor(n.row),l=e.getCellField(n);return{accessor:r,field:l}},[e]);return{getCellMetadata:s,getCellErrorMetadata:t}},Ns=({matrix:e,form:s})=>{const[t,n]=a.useState(null),{getValues:r,setValue:l}=s,i=a.useCallback(c=>{if(!c)return null;const d=e.getCellField(c);if(!d)return null;const h=r(d);n({field:d,value:h})},[r,e]),o=a.useCallback(()=>{if(!t)return;const{field:c,value:d}=t;requestAnimationFrame(()=>{l(c,d)})},[l,t]);return{createSnapshot:i,restoreSnapshot:o}},Fs=({matrix:e,anchor:s,rangeEnd:t,isEditing:n,getSelectionValues:r,setSelectionValues:l,execute:i})=>{const o=a.useCallback(d=>{var w;if(n||!s||!t)return;d.preventDefault();const h=e.getFieldsInSelection(s,t),g=r(h).map(v=>`${v}`??"").join("	");(w=d.clipboardData)==null||w.setData("text/plain",g)},[n,s,t,e,r]),c=a.useCallback(d=>{var p;if(n||!s||!t)return;d.preventDefault();const h=(p=d.clipboardData)==null?void 0:p.getData("text/plain");if(!h)return;const b=h.split("	"),g=e.getFieldsInSelection(s,t),w=r(g),v=new se({fields:g,next:b,prev:w,setter:l});i(v)},[n,s,t,e,r,l,i]);return{handleCopyEvent:o,handlePasteEvent:c}};function Ps(e,s){const t=e.getAllLeafColumns(),n=t.map(c=>({id:c.id,name:Rs(c),checked:c.getIsVisible(),disabled:!c.getCanHide()})),r=a.useCallback(c=>d=>{const h=t[c];h.getCanHide()&&(s.toggleColumn(c,d),h.toggleVisibility(d))},[t,s]),l=a.useCallback(()=>{e.setColumnVisibility({})},[e]),o=n.filter(c=>!c.disabled).length===0;return{columnOptions:n,handleToggleColumn:r,handleResetColumns:l,isDisabled:o}}function Rs(e){const s=e.columnDef.id,t=e.columnDef.enableHiding,n=e==null?void 0:e.columnDef.meta;if(!s)throw new Error("Column is missing an id, which is a required field. Please provide an id for the column.");return!(n!=null&&n.name)&&t&&console.warn(`Column "${s}" does not have a name. You should add a name to the column definition. Falling back to the column id.`),(n==null?void 0:n.name)||s}var Gs=(e,s,t)=>{const[n,r]=a.useState(!1),[l,i]=a.useState(null),{flatRows:o}=s.getRowModel(),c=s.getAllFlatColumns(),d=xt(t),h=d.length,{rowsWithErrors:b,columnsWithErrors:g}=a.useMemo(()=>{const v=new Set,p=new Set;return d.forEach(f=>{const j=e.rowAccessors.findIndex(E=>E&&(f===E||f.startsWith(`${E}.`)));j!==-1&&v.add(j);const x=e.columnAccessors.findIndex(E=>E&&(f===E||f.endsWith(`.${E}`)));x!==-1&&p.add(x)}),{rowsWithErrors:v,columnsWithErrors:p}},[d,e.rowAccessors,e.columnAccessors]),w=a.useCallback((v,p,f,j)=>{if(n)l&&(f(l.rows),j(l.columns));else{i({rows:{...v},columns:{...p}});const x=o.map((y,S)=>b.has(S)?void 0:S).filter(y=>y!==void 0),E=c.map((y,S)=>!g.has(S)&&S!==0?y.id:void 0).filter(y=>y!==void 0);f(x.reduce((y,S)=>({...y,[S]:!1}),{})),j(E.reduce((y,S)=>({...y,[S]:!1}),{}))}r(x=>!x)},[n,l,o,c,b,g]);return{errorCount:h,isHighlighted:n,toggleErrorHighlighting:w}};function xt(e,s=[]){return typeof e!="object"||e===null?[]:"message"in e&&"type"in e?[s.join(".")]:Object.entries(e).flatMap(([t,n])=>xt(n,[...s,t]))}var Ts=({matrix:e,form:s,anchor:t})=>{const{getValues:n,setValue:r}=s,l=a.useCallback(o=>o.length?o.map(c=>n(c)):[],[n]),i=a.useCallback(async(o,c)=>{if(!o.length||!t)return;const d=e.getCellType(t);if(!d)return;const h=Hs(c,d);o.forEach((b,g)=>{if(!b)return;const w=g%c.length,v=h[w];r(b,v,{shouldDirty:!0,shouldTouch:!0})})},[e,t,r]);return{getSelectionValues:l,setSelectionValues:i}};function Vs(e){if(typeof e=="number")return e;const s=Number(e);if(isNaN(s))throw new Error(`String "${e}" cannot be converted to number.`);return s}function Ws(e){if(typeof e=="boolean")return e;if(typeof e>"u"||e===null)return!1;const s=e.toLowerCase();if(s==="true"||s==="false")return s==="true";throw new Error(`String "${e}" cannot be converted to boolean.`)}function $s(e){return typeof e>"u"||e===null?"":String(e)}function Hs(e,s){switch(s){case"number":return e.map(t=>t===""?t:Vs(t));case"boolean":return e.map(Ws);case"text":return e.map($s);default:throw new Error(`Unsupported target type "${s}".`)}}var Ks=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Bs=["ArrowUp","ArrowDown"],Ls=({containerRef:e,matrix:s,anchor:t,rangeEnd:n,isEditing:r,setTrapActive:l,scrollToCoordinates:i,setSingleRange:o,setRangeEnd:c,onEditingChangeHandler:d,getValues:h,setValue:b,execute:g,undo:w,redo:v,queryTool:p,getSelectionValues:f,setSelectionValues:j,restoreSnapshot:x})=>{const E=a.useCallback(m=>{if(!t)return;const C=s.getCellType(t);if(r&&C!=="boolean")return;const z=Bs.includes(m.key)?"vertical":"horizontal",k=z==="horizontal"?t:m.shiftKey?n:t,D=z==="horizontal"?o:m.shiftKey?c:o;if(!k)return;const{row:I,col:V}=k,N=H=>{m.preventDefault(),m.stopPropagation(),i(H,z),D(H)},Z=s.getValidMovement(I,V,m.key,m.metaKey||m.ctrlKey);N(Z)},[r,t,n,i,o,c,s]),y=a.useCallback(m=>{if(!t)return;m.preventDefault(),m.stopPropagation();const{row:C,col:z}=t,k=m.shiftKey?"ArrowLeft":"ArrowRight",D="horizontal",I=s.getValidMovement(C,z,k,m.metaKey||m.ctrlKey);i(I,D),o(I)},[t,i,o,s]),S=a.useCallback(m=>{if(m.preventDefault(),m.shiftKey){v();return}w()},[v,w]),F=a.useCallback(m=>{const C=n??m,z=s.getFieldsInSelection(m,C),k=f(z),D=k.every(N=>N===!0),I=Array.from({length:k.length},()=>!D),V=new se({fields:z,next:I,prev:k,setter:j});g(V)},[n,s,f,j,g]),R=a.useCallback(m=>{const C=s.getCellField(m),z=p==null?void 0:p.getInput(m);if(!C||!z)return;const k=h(C),D="",I=new Ee({next:D,prev:k,setter:V=>{b(C,V,{shouldDirty:!0,shouldTouch:!0})}});g(I),z.focus()},[s,p,h,g,b]),P=a.useCallback(m=>{if(!t||r)return;m.preventDefault();const C=s.getCellType(t);if(C)switch(C){case"boolean":F(t);break;case"number":case"text":R(t);break}},[t,r,s,F,R]),A=a.useCallback((m,C)=>{const z=m.shiftKey?"ArrowUp":"ArrowDown",k=s.getValidMovement(C.row,C.col,z,!1);if(C.row!==k.row||C.col!==k.col)o(k),i(k,"vertical");else{const D=p==null?void 0:p.getContainer(C);D==null||D.focus()}d(!1)},[p,s,i,o,d]),Q=a.useCallback(m=>{const C=p==null?void 0:p.getInput(m);C&&(C.focus(),d(!0))},[p,d]),J=a.useCallback((m,C)=>{if(r){A(m,C);return}Q(C)},[A,Q,r]),U=a.useCallback((m,C)=>{const z=s.getCellField(C);if(!z)return;const k=h(z);let D;typeof k=="boolean"?D=!k:D=!0;const I=new Ee({next:D,prev:k,setter:V=>{b(z,V,{shouldDirty:!0,shouldTouch:!0})}});g(I),A(m,C)},[g,h,A,s,b]),Y=a.useCallback(m=>{if(!t)return;switch(m.preventDefault(),s.getCellType(t)){case"text":case"number":J(m,t);break;case"boolean":{U(m,t);break}}},[t,s,J,U]),T=a.useCallback((m,C)=>{const z=s.getFieldsInSelection(m,C),k=f(z),D=Array.from({length:k.length},()=>""),I=new se({fields:z,next:D,prev:k,setter:j});g(I)},[s,f,j,g]),q=a.useCallback((m,C)=>{const z=s.getFieldsInSelection(m,C),k=f(z),D=Array.from({length:k.length},()=>!1),I=new se({fields:z,next:D,prev:k,setter:j});g(I)},[g,f,s,j]),G=a.useCallback(m=>{if(!t||!n||r)return;m.preventDefault();const C=s.getCellType(t);if(C)switch(C){case"text":case"number":T(t,n);break;case"boolean":q(t,n);break}},[t,n,r,s,T,q]),B=a.useCallback(m=>{if(!t||!r)return;m.preventDefault(),m.stopPropagation(),x();const C=p==null?void 0:p.getContainer(t);C==null||C.focus()},[p,r,t,x]),ee=a.useCallback(m=>{if(!e||r)return;const C=Us(e),z=k=>{k&&(l(!1),k.focus())};switch(m.key){case".":z(C.cancel);break;case",":z(C.shortcuts);break}},[t,r,l,e]);return{handleKeyDownEvent:a.useCallback(m=>{if(Ks.includes(m.key)){E(m);return}if(m.key==="z"&&(m.metaKey||m.ctrlKey)){S(m);return}if(m.key===" "){P(m);return}if(m.key==="Delete"||m.key==="Backspace"){G(m);return}if(m.key==="Enter"){Y(m);return}if(m.key==="Escape"){B(m);return}if(m.key==="Tab"){y(m);return}},[B,E,S,P,Y,G,y]),handleSpecialFocusKeys:ee}};function Us(e){const s=Array.from(document.querySelectorAll("[tabindex], a, button, input, select, textarea")),t=s.indexOf(e.current),n=t>0?s[t-1]:null;let r=null;for(let l=t+1;l<s.length;l++)if(!e.current.contains(s[l])){r=s[l];break}return{shortcuts:n,cancel:r}}var Ys=({matrix:e,anchor:s,dragEnd:t,setDragEnd:n,isDragging:r,setIsDragging:l,setRangeEnd:i,setIsSelecting:o,getSelectionValues:c,setSelectionValues:d,execute:h})=>{const b=a.useCallback(()=>{if(!r||!s||!t)return;const w=e.getFieldsInSelection(s,t),v=e.getCellField(s);if(!v||!w.length)return;const p=c([v]),f=w.filter(y=>y!==v),j=c(f),x=Array.from({length:j.length},()=>p[0]),E=new se({fields:f,prev:j,next:x,setter:d});h(E),l(!1),n(null),i(t)},[r,s,t,e,c,d,h,l,n,i]);return{handleMouseUpEvent:a.useCallback(()=>{b(),o(!1)},[b,o])}},Zs=({matrix:e,anchor:s,visibleColumns:t,visibleRows:n,columnVirtualizer:r,rowVirtualizer:l,setColumnVisibility:i,flatColumns:o,queryTool:c,setSingleRange:d})=>{const h=a.useCallback((g,w)=>{if(!s)return;const{row:v,col:p}=g,{row:f,col:j}=s,x=v>=f?"down":"up",E=p>=j?"right":"left";let y=x==="down"?v+1:v-1;n[y]===void 0&&(y=v);let S=E==="right"?p+1:p-1;t[S]===void 0&&(S=p);const F={align:"auto",behavior:"auto"};(w==="horizontal"||w==="both")&&r.scrollToIndex(S,F),(w==="vertical"||w==="both")&&l.scrollToIndex(y,F)},[s,r,n,l,t]),b=a.useCallback(g=>{const w=e.getCoordinatesByField(g);if(!w)return;const v=o[w.col];i(p=>({...p,[v.id]:!0})),requestAnimationFrame(()=>{h(w,"both"),d(w)}),requestAnimationFrame(()=>{const p=c==null?void 0:c.getInput(w);p&&p.focus()})},[e,o,i,h,d,c]);return{scrollToCoordinates:h,navigateToField:b}},Qs=e=>{const s=a.useRef(null);return a.useEffect(()=>{e.current&&(s.current=new Is(e.current))},[e]),s.current},Ct=({rowErrors:e})=>{const s=e?e.length:0;return!e||s<=0?null:u.jsx(ke,{content:u.jsx("ul",{className:"flex flex-col gap-y-3",children:e.map((t,n)=>u.jsx(Xs,{error:t},n))}),delayDuration:0,children:u.jsx(Rt,{color:"red",size:"2xsmall",className:"cursor-default",children:s})})},Xs=({error:e})=>{const{t:s}=ne();return u.jsxs("li",{className:"txt-compact-small flex flex-col items-start",children:[e.message,u.jsx("button",{type:"button",onClick:e.to,className:"text-ui-fg-interactive hover:text-ui-fg-interactive-hover transition-fg",children:s("dataGrid.errors.fixError")})]})},ge=({isAnchor:e,isSelected:s,isDragSelected:t,field:n,showOverlay:r,placeholder:l,innerProps:i,overlayProps:o,children:c,errors:d,rowErrors:h})=>{const g=!!ce(d,n);return u.jsxs("div",{className:X("bg-ui-bg-base group/cell relative flex size-full items-center gap-x-2 px-4 py-2.5 outline-none",{"bg-ui-tag-red-bg text-ui-tag-red-text":g&&!e&&!s&&!t,"ring-ui-bg-interactive ring-2 ring-inset":e,"bg-ui-bg-highlight [&:has([data-field]:focus)]:bg-ui-bg-base":s||e,"bg-ui-bg-subtle":t&&!e}),tabIndex:-1,...i,children:[u.jsx(fs,{name:n,errors:d,render:({message:w})=>u.jsx("div",{className:"flex items-center justify-center",children:u.jsx(ke,{content:w,delayDuration:0,children:u.jsx(nt,{className:"text-ui-tag-red-icon z-[3]"})})})}),u.jsx("div",{className:"relative z-[1] flex size-full items-center justify-center",children:u.jsx(Js,{isAnchor:e,placeholder:l,children:c})}),u.jsx(Ct,{rowErrors:h}),r&&u.jsx("div",{...o,"data-cell-overlay":"true",className:"absolute inset-0 z-[2] size-full"})]})},Js=({isAnchor:e,placeholder:s,children:t})=>!e&&s?s:t,qs=({context:e,disabled:s})=>{const{field:t,control:n,renderProps:r}=pe({context:e}),l=re({context:e}),{container:i,input:o}=r;return u.jsx(fe,{control:n,name:t,render:({field:c})=>u.jsx(ge,{...i,...l,children:u.jsx(en,{field:c,inputProps:o,disabled:s})})})},en=({field:e,inputProps:s,disabled:t})=>{const{ref:n,value:r,onBlur:l,name:i,disabled:o}=e,{ref:c,onBlur:d,onChange:h,onFocus:b,...g}=s,w=me(n,c);return u.jsx(ns,{disabled:t||o,name:i,checked:r,onCheckedChange:v=>h(v===!0,r),onFocus:b,onBlur:()=>{l(),d()},ref:w,tabIndex:-1,...g})},Me=({context:e,code:s})=>{const{field:t,control:n,renderProps:r}=pe({context:e}),l=re({context:e}),{container:i,input:o}=r,c=Nt[s.toUpperCase()];return u.jsx(fe,{control:n,name:t,render:({field:d})=>u.jsx(ge,{...i,...l,children:u.jsx(tn,{field:d,inputProps:o,currencyInfo:c})})})},tn=({field:e,inputProps:s,currencyInfo:t})=>{const{value:n,onChange:r,onBlur:l,ref:i,...o}=e,{ref:c,onBlur:d,onFocus:h,onChange:b,...g}=s,w=a.useCallback(x=>{const E=typeof x=="number"?x.toString():x||"";return Jt({value:E,decimalScale:t.decimal_digits,disableGroupSeparators:!0,decimalSeparator:"."})},[t]),[v,p]=a.useState(n||""),f=(x,E,y)=>{if(!x){p("");return}p(x)};a.useEffect(()=>{let x=n;isNaN(Number(n))||(x=w(x)),p(x)},[n,w]);const j=me(c,i);return u.jsxs("div",{className:"relative flex size-full items-center",children:[u.jsx("span",{className:"txt-compact-small text-ui-fg-muted pointer-events-none absolute left-0 w-fit min-w-4","aria-hidden":!0,children:t.symbol_native}),u.jsx(qt,{...o,...g,ref:j,className:"txt-compact-small w-full flex-1 cursor-default appearance-none bg-transparent pl-8 text-right outline-none",value:v||void 0,onValueChange:f,formatValueOnBlur:!0,onBlur:()=>{l(),d(),b(v,n)},onFocus:h,decimalScale:t.decimal_digits,decimalsLimit:t.decimal_digits,autoComplete:"off",tabIndex:-1})]})},sn=({context:e,...s})=>{const{field:t,control:n,renderProps:r}=pe({context:e}),l=re({context:e}),{container:i,input:o}=r;return u.jsx(fe,{control:n,name:t,render:({field:c})=>u.jsx(ge,{...i,...l,children:u.jsx(nn,{field:c,inputProps:o,...s})})})},nn=({field:e,inputProps:s,...t})=>{const{ref:n,value:r,onChange:l,onBlur:i,...o}=e,{ref:c,onChange:d,onBlur:h,onFocus:b,...g}=s,[w,v]=a.useState(r);a.useEffect(()=>{v(r)},[r]);const p=me(c,n);return u.jsx("div",{className:"size-full",children:u.jsx("input",{ref:p,value:w,onChange:f=>v(f.target.value),onBlur:()=>{i(),h(),d(w,r)},onFocus:b,type:"number",inputMode:"decimal",className:X("txt-compact-small size-full bg-transparent outline-none","placeholder:text-ui-fg-muted"),tabIndex:-1,...t,...o,...g})})},_e=({context:e,children:s})=>{const{rowErrors:t}=re({context:e});return u.jsxs("div",{className:"bg-ui-bg-subtle txt-compact-small text-ui-fg-subtle flex size-full cursor-not-allowed items-center justify-between overflow-hidden px-4 py-2.5 outline-none",children:[u.jsx("span",{className:"truncate",children:s}),u.jsx(Ct,{rowErrors:t})]})},rn=(e=20)=>{const[s,t]=a.useState([]),[n,r]=a.useState([]),l=s.length>0,i=n.length>0,o=a.useCallback(()=>{if(!l)return;const h=s[s.length-1],b=s.slice(0,s.length-1);h.undo(),t(b),r([h,...n.slice(0,e-1)])},[l,n,s,e]),c=a.useCallback(()=>{if(!i)return;const h=n[0],b=n.slice(1);h.redo(),t([...s,h].slice(0,e-1)),r(b)},[i,n,s,e]),d=a.useCallback(h=>{h.execute(),t(b=>[...b,h].slice(0,e-1)),r([])},[e]);return{undo:o,redo:c,execute:d,canUndo:l,canRedo:i}},ln=()=>{const{t:e}=ne();return a.useMemo(()=>[{label:e("dataGrid.shortcuts.commands.undo"),keys:{Mac:["⌘","Z"],Windows:["Ctrl","Z"]}},{label:e("dataGrid.shortcuts.commands.redo"),keys:{Mac:["⇧","⌘","Z"],Windows:["Shift","Ctrl","Z"]}},{label:e("dataGrid.shortcuts.commands.copy"),keys:{Mac:["⌘","C"],Windows:["Ctrl","C"]}},{label:e("dataGrid.shortcuts.commands.paste"),keys:{Mac:["⌘","V"],Windows:["Ctrl","V"]}},{label:e("dataGrid.shortcuts.commands.edit"),keys:{Mac:["↵"],Windows:["Enter"]}},{label:e("dataGrid.shortcuts.commands.delete"),keys:{Mac:["⌫"],Windows:["Backspace"]}},{label:e("dataGrid.shortcuts.commands.clear"),keys:{Mac:["Space"],Windows:["Space"]}},{label:e("dataGrid.shortcuts.commands.moveUp"),keys:{Mac:["↑"],Windows:["↑"]}},{label:e("dataGrid.shortcuts.commands.moveDown"),keys:{Mac:["↓"],Windows:["↓"]}},{label:e("dataGrid.shortcuts.commands.moveLeft"),keys:{Mac:["←"],Windows:["←"]}},{label:e("dataGrid.shortcuts.commands.moveRight"),keys:{Mac:["→"],Windows:["→"]}},{label:e("dataGrid.shortcuts.commands.moveTop"),keys:{Mac:["⌘","↑"],Windows:["Ctrl","↑"]}},{label:e("dataGrid.shortcuts.commands.moveBottom"),keys:{Mac:["⌘","↓"],Windows:["Ctrl","↓"]}},{label:e("dataGrid.shortcuts.commands.selectDown"),keys:{Mac:["⇧","↓"],Windows:["Shift","↓"]}},{label:e("dataGrid.shortcuts.commands.selectUp"),keys:{Mac:["⇧","↑"],Windows:["Shift","↑"]}},{label:e("dataGrid.shortcuts.commands.selectColumnDown"),keys:{Mac:["⇧","⌘","↓"],Windows:["Shift","Ctrl","↓"]}},{label:e("dataGrid.shortcuts.commands.selectColumnUp"),keys:{Mac:["⇧","⌘","↑"],Windows:["Shift","Ctrl","↑"]}},{label:e("dataGrid.shortcuts.commands.focusToolbar"),keys:{Mac:["⌃","⌥",","],Windows:["Ctrl","Alt",","]}},{label:e("dataGrid.shortcuts.commands.focusCancel"),keys:{Mac:["⌃","⌥","."],Windows:["Ctrl","Alt","."]}}],[e])},on=({open:e,onOpenChange:s})=>{const{t}=ne(),[n,r]=a.useState(""),l=ln(),i=a.useMemo(()=>l.filter(o=>o.label.toLowerCase().includes(n.toLowerCase())),[n,l]);return u.jsxs(Tt,{open:e,onOpenChange:s,children:[u.jsx(Vt,{asChild:!0,children:u.jsx(ae,{size:"small",variant:"secondary",children:t("dataGrid.shortcuts.label")})}),u.jsxs(Wt,{children:[u.jsx($t,{className:X("bg-ui-bg-overlay fixed inset-0","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0")}),u.jsxs(Ht,{className:"bg-ui-bg-subtle shadow-elevation-modal fixed left-[50%] top-[50%] flex h-full max-h-[612px] w-full max-w-[560px] translate-x-[-50%] translate-y-[-50%] flex-col divide-y overflow-hidden rounded-lg outline-none",children:[u.jsxs("div",{className:"flex flex-col gap-y-3 px-6 py-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx(Kt,{asChild:!0,children:u.jsx(Bt,{children:t("app.menus.user.shortcuts")})}),u.jsx(Lt,{className:"sr-only"})]}),u.jsxs("div",{className:"flex items-center gap-x-2",children:[u.jsx(Le,{children:"esc"}),u.jsx(Ut,{asChild:!0,children:u.jsx(Yt,{variant:"transparent",size:"small",children:u.jsx(Zt,{})})})]})]}),u.jsx("div",{children:u.jsx(Qt,{type:"search",value:n,autoFocus:!0,onChange:o=>r(o.target.value)})})]}),u.jsx("div",{className:"flex flex-col divide-y overflow-y-auto",children:i.map((o,c)=>{var d;return u.jsxs("div",{className:"text-ui-fg-subtle flex items-center justify-between px-6 py-3",children:[u.jsx(Xt,{size:"small",children:o.label}),u.jsx("div",{className:"flex items-center gap-x-1",children:(d=o.keys.Mac)==null?void 0:d.map((h,b)=>u.jsx("div",{className:"flex items-center gap-x-1",children:u.jsx(Le,{children:h})},b))})]},c)})})]})]})]})},an=40,yt=e=>{const s=e.getIsPinned(),n=document.documentElement.classList.contains("dark")?"rgb(50,50,53)":"rgb(228,228,231)";return{position:s?"sticky":"relative",width:e.getSize(),zIndex:s?1:0,borderBottom:s?`1px solid ${n}`:void 0,borderRight:s?`1px solid ${n}`:void 0,left:s==="left"?`${e.getStart("left")}px`:void 0,right:s==="right"?`${e.getAfter("right")}px`:void 0}},cn=({data:e=[],columns:s,state:t,getSubRows:n,onEditingChange:r})=>{var He,Ke;const l=a.useRef(null),{redo:i,undo:o,execute:c}=rn(),{register:d,control:h,getValues:b,setValue:g,formState:{errors:w}}=t,[v,p]=a.useState(!0),[f,j]=a.useState(null),[x,E]=a.useState(null),[y,S]=a.useState(null),[F,R]=a.useState(!1),[P,A]=a.useState(!1),[Q,J]=a.useState(!1),[U,Y]=a.useState({}),[T,q]=a.useState({}),G=ts({data:e,columns:s,initialState:{columnPinning:{left:[s[0].id]}},state:{columnVisibility:U},onColumnVisibilityChange:Y,getSubRows:n,getCoreRowModel:ss(),defaultColumn:{size:200,maxSize:400}}),{flatRows:B}=G.getRowModel(),ee=G.getAllFlatColumns(),M=a.useMemo(()=>B.filter((_,O)=>(T==null?void 0:T[O])!==!1),[B,T]),m=G.getVisibleLeafColumns(),C=tt({count:M.length,estimateSize:()=>an,getScrollElement:()=>l.current,overscan:5,rangeExtractor:_=>{const O=new Set(Array.from({length:_.endIndex-_.startIndex+1},(W,$)=>_.startIndex+$));return f&&M[f.row]&&O.add(f.row),x&&M[x.row]&&O.add(x.row),Array.from(O).sort((W,$)=>W-$)}}),z=C.getVirtualItems(),k=tt({count:m.length,estimateSize:_=>m[_].getSize(),getScrollElement:()=>l.current,horizontal:!0,overscan:3,rangeExtractor:_=>{const O=_.startIndex,W=_.endIndex,$=new Set(Array.from({length:W-O+1},(le,L)=>O+L));return f&&m[f.col]&&$.add(f.col),x&&m[x.col]&&$.add(x.col),$.add(0),Array.from($).sort((le,L)=>le-L)}}),D=k.getVirtualItems();let I,V;k&&(D!=null&&D.length)&&(I=((He=D[0])==null?void 0:He.start)??0,V=k.getTotalSize()-(((Ke=D[D.length-1])==null?void 0:Ke.end)??0));const N=a.useMemo(()=>new Ds(B,s),[B,s]),Z=Qs(l),H=a.useCallback(_=>{j(_),E(_)},[]),{errorCount:jt,isHighlighted:Et,toggleErrorHighlighting:Se}=Gs(N,G,w),Mt=a.useCallback(()=>{Se(T,U,q,Y)},[Se,T,U]),{columnOptions:_t,handleToggleColumn:ze,handleResetColumns:kt,isDisabled:St}=Ps(G,N),zt=a.useCallback(_=>ze(_),[ze]),{navigateToField:De,scrollToCoordinates:Ie}=Zs({matrix:N,queryTool:Z,anchor:f,columnVirtualizer:k,rowVirtualizer:C,flatColumns:ee,setColumnVisibility:Y,setSingleRange:H,visibleColumns:m,visibleRows:M}),{createSnapshot:Oe,restoreSnapshot:Dt}=Ns({matrix:N,form:t}),ve=a.useCallback(_=>{r&&r(_),_&&Oe(f),J(_)},[f,Oe,r]),{getSelectionValues:be,setSelectionValues:we}=Ts({matrix:N,form:t,anchor:f}),{handleKeyDownEvent:xe,handleSpecialFocusKeys:Ae}=Ls({containerRef:l,matrix:N,queryTool:Z,anchor:f,rangeEnd:x,isEditing:Q,setTrapActive:p,setRangeEnd:E,getSelectionValues:be,getValues:b,setSelectionValues:we,onEditingChangeHandler:ve,restoreSnapshot:Dt,setSingleRange:H,scrollToCoordinates:Ie,execute:c,undo:o,redo:i,setValue:g}),{handleMouseUpEvent:Ce}=Ys({matrix:N,anchor:f,dragEnd:y,setDragEnd:S,isDragging:P,setIsDragging:A,setRangeEnd:E,setIsSelecting:R,getSelectionValues:be,setSelectionValues:we,execute:c}),{handleCopyEvent:ye,handlePasteEvent:je}=Fs({matrix:N,isEditing:Q,anchor:f,rangeEnd:x,getSelectionValues:be,setSelectionValues:we,execute:c}),{getWrapperFocusHandler:Ne,getInputChangeHandler:Fe,getOverlayMouseDownHandler:Pe,getWrapperMouseOverHandler:Re,getIsCellDragSelected:Ge,getIsCellSelected:Te,onDragToFillStart:It}=Os({matrix:N,anchor:f,rangeEnd:x,setRangeEnd:E,isDragging:P,setIsDragging:A,isSelecting:F,setIsSelecting:R,setSingleRange:H,dragEnd:y,setDragEnd:S,setValue:g,execute:c}),{getCellErrorMetadata:Ve,getCellMetadata:We}=As({matrix:N});a.useEffect(()=>{if(v)return window.addEventListener("keydown",xe),window.addEventListener("mouseup",Ce),window.addEventListener("copy",ye),window.addEventListener("paste",je),()=>{window.removeEventListener("keydown",xe),window.removeEventListener("mouseup",Ce),window.removeEventListener("copy",ye),window.removeEventListener("paste",je)}},[v,xe,Ce,ye,je]),a.useEffect(()=>{const _=O=>{if(wt(O)){Ae(O);return}};return window.addEventListener("keydown",_),()=>{window.removeEventListener("keydown",_)}},[Ae]);const Ot=a.useCallback(_=>{_&&p(!1)},[]);a.useEffect(()=>{f&&(x||E(f))},[f,x]),a.useEffect(()=>{if(!f&&N){const _=N.getFirstNavigableCell();_&&H(_)}},[f,N,H]);const At=a.useMemo(()=>({anchor:f,control:h,trapActive:v,errors:w,setTrapActive:p,setIsSelecting:R,setIsEditing:ve,setSingleRange:H,setRangeEnd:E,getWrapperFocusHandler:Ne,getInputChangeHandler:Fe,getOverlayMouseDownHandler:Pe,getWrapperMouseOverHandler:Re,register:d,getIsCellSelected:Te,getIsCellDragSelected:Ge,getCellMetadata:We,getCellErrorMetadata:Ve,navigateToField:De}),[f,h,v,w,p,R,ve,H,E,Ne,Fe,Pe,Re,d,Te,Ge,We,Ve,De]),$e=a.useCallback(()=>{f&&!v&&(p(!0),H(f),Ie(f,"both"),requestAnimationFrame(()=>{var _;(_=Z==null?void 0:Z.getContainer(f))==null||_.focus()}))},[f,v,Z]);return u.jsx(pt.Provider,{value:At,children:u.jsxs("div",{className:"bg-ui-bg-subtle flex size-full flex-col",children:[u.jsx(un,{columnOptions:_t,isDisabled:St,onToggleColumn:zt,errorCount:jt,onToggleErrorHighlighting:Mt,onResetColumns:kt,isHighlighted:Et,onHeaderInteractionChange:Ot}),u.jsx("div",{className:"size-full overflow-hidden",children:u.jsx("div",{ref:l,autoFocus:!0,tabIndex:0,className:"relative h-full select-none overflow-auto outline-none",onFocus:$e,onClick:$e,"data-container":!0,role:"application",children:u.jsxs("div",{role:"grid",className:"text-ui-fg-subtle grid",children:[u.jsx("div",{role:"rowgroup",className:"txt-compact-small-plus bg-ui-bg-subtle sticky top-0 z-[1] grid",children:G.getHeaderGroups().map(_=>u.jsxs("div",{role:"row",className:"flex h-10 w-full",children:[I?u.jsx("div",{role:"presentation",style:{display:"flex",width:I}}):null,D.reduce((O,W,$,le)=>{const L=_.headers[W.index],oe=le[$-1];return oe&&W.index!==oe.index+1&&O.push(u.jsx("div",{role:"presentation",style:{display:"flex",width:`${W.start-oe.end}px`}},`padding-${oe.index}-${W.index}`)),O.push(u.jsx("div",{role:"columnheader","data-column-index":W.index,style:{width:L.getSize(),...yt(L.column)},className:"bg-ui-bg-base txt-compact-small-plus flex items-center border-b border-r px-4 py-2.5",children:L.isPlaceholder?null:rt(L.column.columnDef.header,L.getContext())},L.id)),O},[]),V?u.jsx("div",{role:"presentation",style:{display:"flex",width:V}}):null]},_.id))}),u.jsx("div",{role:"rowgroup",className:"relative grid",style:{height:`${C.getTotalSize()}px`},children:z.map(_=>{const O=M[_.index],W=B.findIndex($=>$.id===O.id);return u.jsx(hn,{row:O,rowIndex:W,virtualRow:_,flatColumns:ee,virtualColumns:D,anchor:f,virtualPaddingLeft:I,virtualPaddingRight:V,onDragToFillStart:It},O.id)})})]})})})]})})},un=({columnOptions:e,isDisabled:s,onToggleColumn:t,onResetColumns:n,isHighlighted:r,errorCount:l,onToggleErrorHighlighting:i,onHeaderInteractionChange:o})=>{const[c,d]=a.useState(!1),[h,b]=a.useState(!1),{t:g}=ne(),w=e.some(f=>!f.checked),v=f=>{o(f),d(f)},p=f=>{o(f),b(f)};return u.jsxs("div",{className:"bg-ui-bg-base flex items-center justify-between border-b p-4",children:[u.jsxs("div",{className:"flex items-center gap-x-2",children:[u.jsxs(ie,{open:h,onOpenChange:p,children:[u.jsx(Gt,{showTooltip:s,content:g("dataGrid.columns.disabled"),children:u.jsx(ie.Trigger,{asChild:!0,disabled:s,children:u.jsxs(ae,{size:"small",variant:"secondary",children:[w?u.jsx(ut,{}):u.jsx(it,{}),g("dataGrid.columns.view")]})})}),u.jsx(ie.Content,{children:e.map((f,j)=>{const{checked:x,disabled:E,id:y,name:S}=f;return E?null:u.jsx(ie.CheckboxItem,{checked:x,onCheckedChange:t(j),onSelect:F=>F.preventDefault(),children:S},y)})})]}),w&&u.jsx(ae,{size:"small",variant:"transparent",type:"button",onClick:n,className:"text-ui-fg-muted hover:text-ui-fg-subtle","data-id":"reset-columns",children:g("dataGrid.columns.resetToDefault")})]}),u.jsxs("div",{className:"flex items-center gap-x-2",children:[l>0&&u.jsxs(ae,{size:"small",variant:"secondary",type:"button",onClick:i,className:X({"bg-ui-button-neutral-pressed":r}),children:[u.jsx(nt,{className:"text-ui-fg-subtle"}),u.jsx("span",{children:g("dataGrid.errors.count",{count:l})})]}),u.jsx(on,{open:c,onOpenChange:v})]})]})},dn=({cell:e,columnIndex:s,rowIndex:t,anchor:n,onDragToFillStart:r})=>{const i=bt({row:t,col:s},n);return u.jsx("div",{role:"gridcell","aria-rowindex":t,"aria-colindex":s,style:{width:e.column.getSize(),...yt(e.column)},"data-row-index":t,"data-column-index":s,className:X("relative flex items-center border-b border-r p-0 outline-none"),tabIndex:-1,children:u.jsxs("div",{className:"relative h-full w-full",children:[rt(e.column.columnDef.cell,{...e.getContext(),columnIndex:s,rowIndex:t}),i&&u.jsx("div",{onMouseDown:r,className:"bg-ui-fg-interactive absolute bottom-0 right-0 z-[3] size-1.5 cursor-ns-resize"})]})})},hn=({row:e,rowIndex:s,virtualRow:t,virtualPaddingLeft:n,virtualPaddingRight:r,virtualColumns:l,flatColumns:i,anchor:o,onDragToFillStart:c})=>{const d=e.getVisibleCells();return u.jsxs("div",{role:"row","aria-rowindex":t.index,style:{transform:`translateY(${t.start}px)`},className:"bg-ui-bg-subtle txt-compact-small absolute flex h-10 w-full",children:[n?u.jsx("div",{role:"presentation",style:{display:"flex",width:n}}):null,l.reduce((h,b,g,w)=>{const v=d[b.index],p=v.column,f=i.findIndex(x=>x.id===p.id),j=w[g-1];return j&&b.index!==j.index+1&&h.push(u.jsx("div",{role:"presentation",style:{display:"flex",width:`${b.start-j.end}px`}},`padding-${j.index}-${b.index}`)),h.push(u.jsx(dn,{cell:v,columnIndex:f,rowIndex:s,anchor:o,onDragToFillStart:c},v.id)),h},[]),r?u.jsx("div",{role:"presentation",style:{display:"flex",width:r}}):null]})},fn=({columns:e,rows:s=10})=>{const t=Array.from({length:s},(r,l)=>l),n=e.length;return u.jsxs("div",{className:"bg-ui-bg-subtle size-full",children:[u.jsx("div",{className:"bg-ui-bg-base border-b p-4",children:u.jsx("div",{className:"bg-ui-button-neutral h-7 w-[116px] animate-pulse rounded-md"})}),u.jsxs("div",{className:"bg-ui-bg-subtle size-full overflow-auto",children:[u.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${n}, 1fr)`},children:e.map((r,l)=>u.jsx("div",{className:"bg-ui-bg-base flex h-10 w-[200px] items-center border-b border-r px-4 py-2.5 last:border-r-0",children:u.jsx(Be,{className:"h-[14px] w-[164px]"})},l))}),u.jsx("div",{children:t.map((r,l)=>u.jsx("div",{className:"grid",style:{gridTemplateColumns:`repeat(${n}, 1fr)`},children:e.map((i,o)=>u.jsx("div",{className:"bg-ui-bg-base flex h-10 w-[200px] items-center border-b border-r px-4 py-2.5 last:border-r-0",children:u.jsx(Be,{className:"h-[14px] w-[164px]"})},o))},l))})]})]})},mn=({context:e})=>{const{field:s,control:t,renderProps:n}=pe({context:e}),r=re({context:e}),{container:l,input:i}=n;return u.jsx(fe,{control:t,name:s,render:({field:o})=>u.jsx(ge,{...l,...r,children:u.jsx(pn,{field:o,inputProps:i})})})},pn=({field:e,inputProps:s})=>{const{onChange:t,onBlur:n,ref:r,value:l,...i}=e,{ref:o,onBlur:c,onChange:d,...h}=s,[b,g]=a.useState(l);a.useEffect(()=>{g(l)},[l]);const w=me(o,r);return u.jsx("input",{className:X("txt-compact-small text-ui-fg-subtle flex size-full cursor-pointer items-center justify-center bg-transparent outline-none","focus:cursor-text"),autoComplete:"off",tabIndex:-1,value:b,onChange:v=>g(v.target.value),ref:w,onBlur:()=>{n(),c(),d(b,l)},...h,...i})},gn=({isLoading:e,...s})=>{var t;return e?u.jsx(fn,{columns:s.columns,rows:(t=s.data)!=null&&t.length&&s.data.length>0?s.data.length:10}):u.jsx(cn,{...s})},jn=Object.assign(gn,{BooleanCell:qs,TextCell:mn,NumberCell:sn,CurrencyCell:Me,ReadonlyCell:_e});function vn(){const e=es();return{column:({id:s,name:t,header:n,cell:r,disableHiding:l=!1,field:i,type:o})=>e.display({id:s,header:n,cell:r,enableHiding:!l,meta:{name:t,field:i,type:o}})}}var st=({includesTax:e})=>{const{t:s}=ne();return u.jsx(ke,{maxWidth:999,content:s(e?"general.includesTaxTooltip":"general.excludesTaxTooltip"),children:u.jsx(ft,{className:X({"text-ui-fg-muted":!e})})})},En=({currencies:e,regions:s,pricePreferences:t,isReadyOnly:n,getFieldName:r,t:l})=>{const i=vn();return[...(e==null?void 0:e.map(o=>{const c=t==null?void 0:t.find(d=>d.attribute==="currency_code"&&d.value===o);return i.column({id:`currency_prices.${o}`,name:l("fields.priceTemplate",{regionOrCurrency:o.toUpperCase()}),field:d=>(n==null?void 0:n(d))?null:r(d,o),type:"number",header:()=>u.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[l("fields.priceTemplate",{regionOrCurrency:o.toUpperCase()}),u.jsx(st,{includesTax:c==null?void 0:c.is_tax_inclusive})]}),cell:d=>n!=null&&n(d)?u.jsx(_e,{context:d}):u.jsx(Me,{code:o,context:d})})}))??[],...(s==null?void 0:s.map(o=>{const c=t==null?void 0:t.find(d=>d.attribute==="region_id"&&d.value===o.id);return i.column({id:`region_prices.${o.id}`,name:l("fields.priceTemplate",{regionOrCurrency:o.name}),field:d=>(n==null?void 0:n(d))?null:r(d,o.id),type:"number",header:()=>u.jsxs("div",{className:"flex w-full items-center justify-between gap-3",children:[l("fields.priceTemplate",{regionOrCurrency:o.name}),u.jsx(st,{includesTax:c==null?void 0:c.is_tax_inclusive})]}),cell:d=>n!=null&&n(d)?u.jsx(_e,{context:d}):(e==null?void 0:e.find(b=>b===o.currency_code))?u.jsx(Me,{code:o.currency_code,context:d}):null})}))??[]]};export{jn as D,En as a,vn as c};
