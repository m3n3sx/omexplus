import{I as x}from"./chunk-MRW3W5RG-CenyZOfQ.js";import{R as f,d as j,d$ as y,a as p,j as e,U as _,s as h,q as u,b as g,aW as I,H as S,A as b}from"./index-DX2a82HP.js";import{c as w,r as q}from"./chunk-7B63V4WX-BEBw9Q_K.js";import{S as o}from"./chunk-ULQT3HE4-D9PRUunE.js";import{T as l}from"./chunk-UR2E444G-CIn7FNeD.js";import"./chunk-3IW4HYUP-GSXGtQm6.js";import{P as k}from"./pencil-square-KR79zc4C.js";import{C as P}from"./container-DmZUKVqp.js";import"./Trans-COftCGG7.js";import"./x-mark-mini-p1eXR82b.js";var A=i=>({queryKey:q.detail(i),queryFn:async()=>h.admin.reservation.retrieve(i)}),H=async({params:i})=>{const n=i.id,t=A(n);return u.getQueryData(t.queryKey)??await u.fetchQuery(t)},C=({reservation:i})=>{const{t:n}=g(),{inventory_item:t,isPending:d}=y(i.inventory_item_id),{stock_location:a,isPending:c}=I(i.location_id);if(d||!t||c||!a)return e.jsx("div",{children:"Loading..."});const r=t.location_levels.find(s=>s.location_id===i.location_id);return e.jsxs(P,{className:"divide-y p-0",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsx(S,{children:n("inventory.reservation.header",{itemName:t.title??t.sku})}),e.jsx(b,{groups:[{actions:[{icon:e.jsx(k,{}),label:n("actions.edit"),to:"edit"}]}]})]}),e.jsx(o,{title:n("inventory.reservation.lineItemId"),value:i.line_item_id}),e.jsx(o,{title:n("inventory.reservation.description"),value:i.description}),e.jsx(o,{title:n("inventory.reservation.location"),value:a==null?void 0:a.name}),e.jsx(o,{title:n("inventory.reservation.inStockAtLocation"),value:r==null?void 0:r.stocked_quantity}),e.jsx(o,{title:n("inventory.reservation.availableAtLocation"),value:r==null?void 0:r.available_quantity}),e.jsx(o,{title:n("inventory.reservation.reservedAtLocation"),value:r==null?void 0:r.reserved_quantity})]})},J=()=>{var m,v;const{id:i}=f(),n=j(),{reservation:t,isLoading:d,isError:a,error:c}=w(i,void 0,{initialData:n}),{inventory_item:r}=y((m=t==null?void 0:t.inventory_item)==null?void 0:m.id,void 0,{enabled:!!((v=t==null?void 0:t.inventory_item)!=null&&v.id)}),{getWidgets:s}=p();if(d||!t)return e.jsx(_,{mainSections:1,sidebarSections:1,showJSON:!0,showMetadata:!0});if(a)throw c;return e.jsxs(l,{widgets:{before:s("reservation.details.before"),after:s("reservation.details.after"),sideBefore:s("reservation.details.side.before"),sideAfter:s("reservation.details.side.after")},data:t,showJSON:!0,showMetadata:!0,children:[e.jsx(l.Main,{children:e.jsx(C,{reservation:t})}),e.jsx(l.Sidebar,{children:r&&e.jsx(x,{inventoryItem:r})})]})};export{J as Component,H as loader};
