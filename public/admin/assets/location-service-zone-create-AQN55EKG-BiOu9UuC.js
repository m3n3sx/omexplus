import{G as j}from"./chunk-7S6ZZ6CV-D30G2GNN.js";import{G as y}from"./chunk-T4W4USY7-kvf0YQSU.js";import{R as S,aW as F,a9 as w,j as e,b as _,r as b,aa as Z,t as g,H as k,w as a,I as C,J as L,B as v,ad as E,ae as r}from"./index-DX2a82HP.js";import"./chunk-X5VECN6S-CaXKo9k3.js";import{b as N}from"./chunk-IEVUOT4K-DvwbsR3T.js";import"./chunk-XVFA73MY-AMj50WTj.js";import"./lodash-CVxbbwuF.js";import"./chunk-5AU4DI7M-HrTrxcOJ.js";import"./chunk-E3YGDIJC-JnAcRQyg.js";import{K as I}from"./chunk-CEEYZHMN-CS2BVby7.js";import{R as t,u as D,S as M}from"./chunk-MDIOSTKB-DN-HuFMP.js";import"./chunk-NOAFLTPV-DhjDzEyc.js";import"./chunk-C76H5USB-jBtboAOl.js";import"./index-BUcLkKzP.js";import"./checkbox-BO157Suw.js";import"./x-mark-mini-p1eXR82b.js";import"./chunk-VDODP7YI-D8aV5IgA.js";import"./chunk-YEDAFXMB-pzp1i2bd.js";import"./chunk-AOFGTNG6-CQXl4ceK.js";import"./chunk-WX2SMNCD-C6PHMHma.js";import"./plus-mini-Dl4b05ye.js";import"./command-bar-DI3uUyU0.js";import"./index-CzIYclp8.js";import"./chunk-QAF7PVQE-q7JGHsta.js";import"./format-CG1SSrem.js";import"./date-picker--Tjqtae5.js";import"./popover-BPEhH8ld.js";import"./triangle-left-mini-LkqMp4G9.js";import"./prompt-BcBTqHKt.js";var R=r.object({name:r.string().min(1),countries:r.array(r.object({iso_2:r.string().min(2),display_name:r.string()})).min(1)});function z({fulfillmentSet:c,type:l,location:i}){const{t:o}=_(),{handleSuccess:d}=D(),[f,h]=b.useState(!1),s=Z({defaultValues:{name:"",countries:[]},resolver:E(R)}),{mutateAsync:p,isPending:m}=N(c.id),u=s.handleSubmit(async n=>{await p({name:n.name,geo_zones:n.countries.map(({iso_2:x})=>({country_code:x,type:"country"}))},{onSuccess:()=>{g.success(o("stockLocations.serviceZones.create.successToast",{name:n.name})),d(`/settings/locations/${i.id}`)},onError:x=>{g.error(x.message)}})});return e.jsx(t.Form,{form:s,children:e.jsxs(I,{className:"flex h-full flex-col overflow-hidden",onSubmit:u,children:[e.jsx(t.Header,{}),e.jsx(t.Body,{className:"flex flex-1 flex-col items-center overflow-auto",children:e.jsxs(M,{id:y,children:[e.jsx("div",{className:"flex flex-1 flex-col items-center",children:e.jsxs("div",{className:"flex w-full max-w-[720px] flex-col gap-y-8 px-2 py-16",children:[e.jsx(k,{children:l==="pickup"?o("stockLocations.serviceZones.create.headerPickup",{location:i.name}):o("stockLocations.serviceZones.create.headerShipping",{location:i.name})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:e.jsx(a.Field,{control:s.control,name:"name",render:({field:n})=>e.jsxs(a.Item,{children:[e.jsx(a.Label,{children:o("fields.name")}),e.jsx(a.Control,{children:e.jsx(C,{...n})}),e.jsx(a.ErrorMessage,{})]})})}),e.jsx(L,{children:o("stockLocations.serviceZones.fields.tip")}),e.jsx(j,{form:s})]})}),e.jsx(j.AreaDrawer,{form:s})]})}),e.jsx(t.Footer,{children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(t.Close,{asChild:!0,children:e.jsx(v,{variant:"secondary",size:"small",children:o("actions.cancel")})}),e.jsx(v,{type:"submit",size:"small",isLoading:m,children:o("actions.save")})]})})]})})}function pe(){var m;const{fset_id:c,location_id:l}=S(),{stock_location:i,isPending:o,isFetching:d,isError:f,error:h}=F(l,{fields:"*fulfillment_sets"}),s=(m=i==null?void 0:i.fulfillment_sets)==null?void 0:m.find(u=>u.id===c),p=(s==null?void 0:s.type)==="pickup"?"pickup":"shipping";if(!o&&!d&&!s)throw w({message:`Fulfillment set with ID: ${c} was not found.`},404);if(f)throw h;return e.jsx(t,{prev:`/settings/locations/${l}`,children:s&&e.jsx(z,{fulfillmentSet:s,location:i,type:p})})}export{pe as Component};
